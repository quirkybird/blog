> å¯¹äº React è€æ‰‹æ¥è¯´ï¼Œå“ˆï¼Ÿæ‡’åŠ è½½éƒ½ä¸ä¼šï¼Œå­¦å•¥ React å˜›ï¼Œä¸è¿‡å¯¹äºçœ‹æ–‡æ¡£å­¦ä¹  React æ¥å®ç°è‡ªå·±çš„åšå®¢æ¥è¯´ï¼Œæ‡’åŠ è½½è·¯ç”±å’Œç»„ä»¶å’±ä¹Ÿæ²¡æƒ³è¿‡è¦ä½¿ç”¨ï¼Œè¿™æˆ–è®¸å°±æ˜¯çœ‹è§†é¢‘å’Œè‡ªå·±ç¿»æ–‡æ¡£å­¦ä¹ çš„å·®åˆ«ï¼Œè§†é¢‘ä¼šæœ‰åˆ«äººä½¿ç”¨è¯¥æŠ€æœ¯çš„æœ€ä½³å®è·µï¼Œè‡ªå·±å°±çç¢ç£¨å§

è®©ç¬”è€…æƒ³èµ·è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯å‚åŠ ä¸€ä¸ªå…¬å¸çš„å‰ç«¯å®ä¹ é¢è¯•ï¼Œé¢è¯•å®˜é—®æˆ‘ï¼šReact å®ç°è·¯ç”±æ‡’åŠ è½½ï¼Ÿ  
æˆ‘å›ç­”:ä½¿ç”¨ require()ï¼Œä¼ å…¥ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œé‡Œé¢å¯¼å…¥ç»„ä»¶ï¼ˆğŸ’¦ğŸ’¦ğŸ’¦ï¼Œå½“æ—¶çš„æƒ³æ³•æ˜¯å’±ä¹Ÿæ²¡åœ¨ React é¡¹ç›®é‡Œé¢ä½¿ç”¨è¿‡è·¯ç”±æ‡’åŠ è½½å•Šï¼Œåªæ˜¯è®°å¾— Vue3 ä¸­æ˜¯ä½¿ç”¨`() => import()`åšçš„ï¼Œå“ªæ€•æ˜¯å›ç­”ä¸€ä¸ª`import()`ä¹Ÿæ¯” require()å¼ºå•Šï¼Œç°åœ¨æƒ³æƒ³å°´å°¬æäº†ï¼Œæ€ªä¸å¾—å½“æ—¶é¢è¯•å®˜åªæ˜¯ç–‘é—®çš„è¯´ require?ç„¶åæ·¡æ·¡çš„â€œå—¯â€ï¼Œç›´æ¥ä¸‹ä¸€ä¸ªé—®é¢˜ï¼‰

å°´å°¬å½’å°´å°¬å•Šï¼Œå’±ä»¬è¦ä»ä¸­æ±²å–ç»éªŒï¼Œè¿™å°±æ¥ç»™è‡ªå·±çš„ yamorz ç«™ç‚¹åŠ ä¸€ä¸ªè·¯ç”±æ‡’åŠ è½½ï¼Œä¸‹æ¬¡å†é—®å’±ä»¬å¯å°±ä¸æ€•äº† ğŸ˜ğŸ˜ğŸ˜

é€šè¿‡æ–‡æ¡£å¾ˆå¿«å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸»è¦å°±æ˜¯ä½¿ç”¨åˆ° React çš„ä¸€ä¸ª API -> `lazy`

è¿™ä¸ªå±æ€§å¯ä»¥å®Œæˆè·¯ç”±æ‡’åŠ è½½å’Œç»„ä»¶æ‡’åŠ è½½ï¼Œæˆ‘ä»¬å…ˆè¯´è·¯ç”±æ‡’åŠ è½½ï¼Œå…¶å®å°±æ˜¯ç”¨`lazy`åŒ…è£¹ä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª React ç»„ä»¶å…·ä½“æ¥è¯´å°±æ˜¯ï¼š

```js
import { lazy } from "react";

const Blog = lazy(() => import("./components/Blog"));
```

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç”¨`Suspense`ç»„ä»¶æ¥å¤„ç†æ‡’åŠ è½½è·¯ç”±æš‚æ—¶è¿˜æ²¡åŠ è½½æ—¶çš„åº”æ€¥å¤„ç†ï¼Œæœ¬èº«åº”è¯¥æ˜¯ç™½å±ï¼ŒReact ç»™å‡ºäº†ä»¥ä¸‹é”™è¯¯ï¼š

> A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.

æˆ‘ä»¬ä¸ä½¿ç”¨`startTransition`,ä½¿ç”¨åˆšåˆšæåˆ°çš„`Suspense`ç»„ä»¶ï¼ˆå¯ç”¨äº† Suspense çš„è·¯ç”±åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šå°†å¯¼èˆªæ›´æ–°åŒ…è£…è‡³ transition ä¸­ï¼‰ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨ React Router v6 ä¸­çš„`createBrowserRouter`, åŒ…è£¹åœ¨æ¸²æŸ“ç”¨çš„`<Outlet />`å³å¯

```js
import { Suspense } from "react";
import { Outlet } from "react-router-dom";

<Suspense fallback={<Loading />}>
  <Outlet />
</Suspense>;
```

å¦‚æ­¤è®¾ç½®ä¹‹åï¼Œè·¯ç”±åŠ è½½æ—¶ï¼Œå¤„äºæš‚åœçŠ¶æ€ï¼Œå°†æ˜¾ç¤º`<Loading />`ï¼Œè‡³æ­¤ï¼Œè·¯ç”±æ‡’åŠ è½½å®Œæˆ

æ¥ä¸‹æ¥åœ¨æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•å®ç°ç»„ä»¶æ‡’åŠ è½½ï¼Œå…¶å®å¼€å§‹æˆ‘è¿˜æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œç»„ä»¶æ‡’åŠ è½½æ²¡å¿…è¦å•Šï¼Œæˆ‘æ˜¯ç”¨æ¡ä»¶æ¸²æŸ“ä¸å°±å¯ä»¥æ§åˆ¶ç»„ä»¶æ˜¯å¦æ¸²æŸ“å— â“ æŸ¥äº†ä¸€ä¸‹æ‰çŸ¥é“ï¼ŒåŸæ¥å°±ç®—æ˜¯æ¡ä»¶æ¸²æŸ“ React ä¹Ÿä¼šæ‰§è¡Œæœªæ¸²æŸ“çš„ä»£ç ï¼Œé€ æˆæ€§èƒ½é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯éœ€è¦åŠ è½½ä¸€ä¸ªç›¸å¯¹è¾ƒå¤§çš„ç»„ä»¶æ—¶
ä¸¾ä¸€ä¸ªç»„ä»¶æ‡’åŠ è½½çš„å°ä¾‹å­ï¼š

```js
import { lazy, Suspense, useState } from "react";
import Loading from "./components/common/Loading";

const MyComponent = lazy(() => import("./component/MyComponent"));

const App = () => {
  const [isShow, setIsShow] = useState(false);
  return (
    <section>
      <h2>ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹ç²¾å½©å†…å®¹ğŸ”¥</h2>
      {isShow && (
        <Suspense fallback={<Loading />}>
          <h2>BOOM!</h2>
          <MyComponent />
        </Suspense>
      )}
      <button onClick={() => setIsShow(true)}></button>
    </section>
  );
};

export default App;
```

> å‚è€ƒå†…å®¹ï¼š  
> - [lazy èƒ½å¤Ÿè®©ä½ åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«æ¸²æŸ“ä¹‹å‰å»¶è¿ŸåŠ è½½ç»„ä»¶çš„ä»£ç ](https://react.docschina.org/reference/react/lazy)  
> - [<Suspense> å…è®¸åœ¨å­ç»„ä»¶å®ŒæˆåŠ è½½å‰å±•ç¤ºåå¤‡æ–¹æ¡ˆ](https://react.docschina.org/reference/react/Suspense)  
> - [startTransition å¯ä»¥è®©ä½ åœ¨ä¸é˜»å¡ UI çš„æƒ…å†µä¸‹æ›´æ–° state](https://react.docschina.org/reference/react/startTransition)
