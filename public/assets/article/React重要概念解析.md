### 虚拟DOM(Virtual DOM)
一种轻量级的JS对象，它可以被看为DOM的副本或者快照，实现对UI的更新。

### 渲染的两个阶段
- 协调
在 React 的更新机制中，每次组件的状态或属性发生变化时，React 都会创建一个新的 React Element 树。然后，React 使用这个新的元素树与上一个渲染的树进行比较，计算出需要在 DOM 上进行的最小更新，这个过程称为协调 (Reconciliation)。
协调阶段主要工作包括：

	1. **遍历生成新DOM树**
		- 根据最新的 Props 和 state 创建新的 React 元素
	2. **比较差异**
		- 对比旧的组件树和新的组件树，决定哪些组件需要更新。这一过程称为Diffing
	3. **生成更新列表**
		- 通过比较出哪些要更新的DOM，React会生成一个“更新列表”，包含了需要执行的DOM更新

需要注意的是，协调阶段可以被打断，会执行更高优先级的更新（如用户输入，交互动画） 

- 提交（把需要改变的 React 元素更新到实际的 DOM 里去）
### 协调引擎
以前用的是Stack Reconciler，根据函数调用栈来跟踪组件树的遍历过程，递归更新，会受到调用栈大小限制、性能问题、更新不可中断

现在使用Fiber Reconciler
  
- **增量渲染**：能够将渲染工作拆分为多个小的任务单元，这些任务可以根据需要暂停、中断、复用或取消
- **任务优先级**：可以根据任务优先级不同，决定任务的执行顺序。例如用户的交互和动画相关的更新会被赋予较高的优先级
- **更好的错误处理**：React可以捕获并处理组件树中的错误，防止整个应用程序崩溃

### React元素（Element）
React Element是React应用中最小的构建块，表示一个轻量级的对象，代表React渲染界面上的DOM节点或者是其他组件，他是**不可变**的，一旦被创建，你就不可以改变它的子元素或者属性
它包含以下信息：

- **type**：这可以是一个字符串 (如 div 或 span 表示 DOM 标签)，或者是一个 React 组件 (类组件或函数组件)。
- **props**：一个对象，其中包含了这个 React 元素的配置选项，如样式、类名、自定义属性等。
- **props.children**：子级 React Element 对象或 React Element 数组。
- **key**：一个可选的唯一标识符，用于在重新渲染时保持组件状态和生命周期的稳定性。
- **ref**：一个可选的引用，用于获取 DOM 元素或者组件的引用。

也就是说，如果有视图的更新，必然伴随新的React Element创建，即使是这样，React仍然会在更新实际DOM时，只更新改变过的最小单位，注意它和组件的不同

### React 组件（Component） 
可以将UI拆分为独立可复用的片段，分为函数式组件和类组件，返回React Element

组件的特点：

- **封装**：组件封装了自己的结构、样式和行为。他们可以轻松的被其他组件引用和嵌套
- **复用**：设计得当的组件可以在不同的部分重复使用，无需重复编写相同代码
- **状态管理**：使用useState来维护和更新自己的状态
- **生命周期管理**：类组件可以通过生命周期方法对组件的创建、更新和销毁过程进行管理。
- **Hooks**：函数式组件可以通过 Hooks 使用状态和其他 React 特性，Hooks 提供了一个更简单和功能强大的模型来构建组件

> 文章参考：[React 之技术详解 (一) - 认识它](https://www.lumin.tech/blog/react-0-base/)
