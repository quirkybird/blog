> ç¬”è€…æ˜¨å¤©é‡åˆ°ä¸€ä¸ªä¼ªå…ƒç´ åŠ¨æ€è®¾ç½® content æ— æ•ˆçš„é—®é¢˜ï¼Œå§‹ç»ˆæ‰¾ä¸åˆ°åŸå› ï¼Œçœ‹æ¥å‰ç«¯ç¼–ç¨‹å°±æ˜¯é æ£é¼“ï¼Œå¦‚æœæ²¡æœ‰è§£å†³é—®é¢˜å°±ä¸€ç›´æ£é¼“ï¼Œæœ€ç»ˆè¿˜æ˜¯è§£å†³äº†ã€‚

åœºæ™¯æ˜¯è¿™æ ·çš„ï¼šæˆ‘æƒ³ä¸ºæˆ‘çš„åšå®¢çš„ä»£ç å—æ·»åŠ ä¸€ä¸ªæ˜¾ç¤ºè¯­è¨€åç§°çš„æ•ˆæœï¼Œä½¿ç”¨ä»£ç å—ä¼ªå…ƒç´ å®ç°ï¼Œæ·»åŠ åˆ°å³ä¸Šè§’ï¼Œä¼ªå…ƒç´ çš„`content`è®¾ç½®ä¸º`var(--code-lang)`ï¼Œæ£€æµ‹å‡ºè¯­è¨€åï¼Œä½¿ç”¨ JS åŠ¨æ€è®¾ç½®ä»£ç å—å…ƒç´ çš„ CSS å˜é‡`--code-lang`ä¸ºè¯­è¨€åç§°,ä»è€Œå®ç°æ˜¾ç¤ºè¯­è¨€åç§°çš„æ•ˆæœã€‚

äº‹å®ä¸Šï¼Œä¸Šè¿°æ–¹æ¡ˆè¡Œä¸é€šï¼Œæ¥ä¸‹æ¥ä¸€èµ·çœ‹çœ‹å†ç¨‹åŠè§£å†³æ–¹æ¡ˆå§ã€‚

é¦–å…ˆï¼Œè®¾ç½®å¥½ä»£ç å—`pre`å¯¹åº”çš„æ ·å¼ï¼Œç‰¹åˆ«æ˜¯`content: var(--code-lang)`

```css
pre {
  position: relative;
  border-left: 5px solid #b9ccdb;
}
pre::after {
  content: var(--code-lang);
  position: absolute;
  right: 10px;
  top: 5px;
  display: inline-block;
  color: #3559e0;
  font-size: clamp(12px 0.4em 16px);
}
```

æˆ‘ä½¿ç”¨`react-markdown`è¿›è¡Œçš„ markdown æ¸²æŸ“ï¼Œå®ƒå…è®¸ä½¿ç”¨ JSX è¯­æ³•å¯¹æ ‡ç­¾è¿›è¡Œè‡ªå®šä¹‰æ¸²æŸ“ï¼Œå¹¶å¯ä»¥æ£€æµ‹è¯­è¨€åç§°ç®€å†™ï¼Œåœ¨`className`å‚æ•°ä¸­ï¼Œä¾‹å¦‚ JSï¼Œå¾—åˆ°`language-js`ï¼ŒæŠŠ JS æå–å‡ºæ¥å°±å¥½äº†

```js
// ç»„ä»¶ä¸­æœ‰ä¸¤ä¸ªå…¨å±€å˜é‡
const lang = useRef();
const langList = useRef([]);
// å¤„ç†codeæ¸²æŸ“çš„å‡½æ•°
const codeBlock = ({ className, children, node }) => {
  if (className) {
    lang.current = className.split("-")[1].toUpperCase();
    langList.current.push(lang.current);
  }
  return <code>{children}</code>;
};
```

æ¥ä¸‹æ¥åŠ¨æ€è®¾ç½®å¥½ css å˜é‡`--code-lang`

```js
useEffect(() => {
  const codes = document.querySelectorAll("pre");
  const codeBlocks = [...codes];
  for (let index in codeBlocks) {
    // ç»™æ¯ä¸€ä¸ªä»£ç å—å¯¹åº”ç´¢å¼•è®¾ç½®å¥½csså˜é‡
    codeBlocks[index].style.setProperty("--code-lang", langList.current[index]);
  }
}, []);
```

å¥½ï¼Œä¸€åˆ‡é¡ºåˆ©ï¼Œæˆ‘ä»¬ç­‰å¾…å¥‡è¿¹å‘ç”Ÿ(â˜†â–½â˜†)ï¼Œç„¶è€Œé¡µé¢å¹¶æ²¡æœ‰ä»»ä½•æ˜¾ç¤º ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œè¿™å°±å¥‡äº†æ€ªäº†ï¼Œé€»è¾‘çœ‹èµ·æ¥å¾ˆé€šç•…å•Šï¼Œäºæ˜¯æˆ‘ Googleï¼Œçœ‹åˆ°ä¸€ä½ç½‘å‹çš„å¸–å­ï¼š[cssï¼šä¼ªå…ƒç´ :before å’Œ:after ä¸ºä»€ä¹ˆéœ€è¦æŒ‡å®šä¸€ä¸ª content](https://blog.csdn.net/weixin_41981909/article/details/106335340)  
æ€»ç»“èµ·æ¥å°±æ˜¯ä¼ªå…ƒç´ çš„ content å¿…é¡»è¦æœ‰åˆå§‹å€¼ï¼Œæˆ‘ä¸€å¼€å§‹è®¾ç½®çš„`var(--code-lang)`ä¸º`undefined`,æ‰€ä»¥æ ¹æœ¬æ²¡æœ‰æŠŠ::after è®¾ç½®ä¸Š

> æˆ‘ä¸€å¼€å§‹é—®çš„ GPTï¼Œå®ƒä¾ç„¶å‘Šè¯‰æˆ‘å°±å¦‚æ­¤è®¾ç½®ï¼Œçœ‹æ¥ GPT ä¹Ÿæ— æ³•ç†è§£å¤ªç»†çš„å†…å®¹ï¼Œæ›´ä½•å†µï¼Œå®ƒç»å¸¸é€ ä¸€å †æ ¹æœ¬ä¸å­˜åœ¨çš„ API

é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œæˆ‘åœ¨ pre ä¸­è®¾ç½®ä¸€ä¸ª`--code-lang`çš„åˆå§‹å€¼å°±å¯ä»¥äº†ï¼Œå¯¹ï¼Œæˆ‘çš„ç¡®è¿™æ ·åšäº†ï¼Œä½†ç»“æœä¾ç„¶ä¸æ˜¾ç¤ºç»“æœï¼Œåœ¨æ§åˆ¶å°ä¸­çš„ç¡®æ˜¾ç¤ºäº†è¿™ä¸ªå˜é‡çš„æ­£ç¡®å€¼ï¼Œåˆ°ç°åœ¨æˆ‘éƒ½ä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼ŒçŸ¥é“çš„æœ‹å‹æ¬¢è¿æ¥äº¤æµä¸‹ä½ çš„æƒ³æ³•  
æœ€åï¼Œæˆ‘è¿˜æ˜¯æ‰¾åˆ°äº†è§£å†³åŠæ³•å°±æ˜¯åˆ©ç”¨æ•°æ®å±æ€§ï¼Œå…·ä½“å¦‚ä¸‹ï¼ˆä»…å±•ç¤ºæ ¸å¿ƒä»£ç å†…å®¹ï¼‰ï¼š  
å…ˆåœ¨æ¸²æŸ“ä»£ç å—æ—¶ï¼Œè®¾ç½®å¥½ data å±æ€§

```js
const preEle = ({ children, node }) => {
  return <pre data-after-content="">{children}</pre>;
};
```

æ¥ç€ï¼Œcss è®¾ç½®ä½¿ç”¨`attr()`CSS å‡½æ•°ï¼Œç”¨äºè®¿é—®å…ƒç´ å±æ€§

```css
pre::after {
  content: attr(data-after-content);
  //...
}
```

æœ€åï¼ŒåŠ¨æ€æ”¹å˜`data-after-content`

```js
//...
for (let index in codeBlocks) {
  // å…ˆç»™ä»–ä»¬è®¾ç½®ä¸Šæ•°æ®å±æ€§
  codeBlocks[index].dataset.afterContent = langList.current[index];
}
```

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ä»£ç åç§°å¯ä»¥åœ¨å³ä¸Šè§’æ­£å¸¸æ˜¾ç¤ºï¼Œä¹Ÿå°±æ˜¯ä½ ç°åœ¨çœ‹åˆ°ä»£ç å—çš„æ ·å­
